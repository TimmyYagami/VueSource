{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["export function isObject(data) {\r\n  return typeof data === 'object' && data != null\r\n}\r\n","import {isObject} from \"../utils/index\";\r\nimport {arrayMethods} from './array.js'\r\n\r\nfunction defineReactive(data, key, value) {\r\n  observer(value)\r\n  Object.defineProperty(data, key, {\r\n    configurable: true,\r\n    enumerable: false,\r\n    get() {\r\n      return value\r\n    },\r\n    set(newVal) {\r\n      if (newVal === value) return\r\n      '劫持了，做操作！'\r\n      value = newVal\r\n    }\r\n  })\r\n}\r\n\r\nclass Observer {\r\n  constructor(data) {\r\n    if (Array.isArray(data)) {\r\n      data.forEach((item, i) => {\r\n        defineReactive(data,i,item)\r\n      })\r\n    } else {\r\n      this.walk(data)\r\n    }\r\n  }\r\n\r\n\r\n  walk(data) {\r\n    for (let k in data) {\r\n      defineReactive(data, k, data[k])\r\n    }\r\n  }\r\n}\r\n\r\nexport function observer(data) {\r\n\r\n  if (!isObject(data)) return\r\n  return new Observer(data)\r\n}\r\n","import {observer} from './observer/index'\r\n\r\nexport function initState(vm) {\r\n  const ops = vm.$options\r\n\r\n  if (ops.data) {\r\n    initData(vm)\r\n  }\r\n}\r\n\r\nfunction initData(vm) {\r\n  let data = vm.$options.data;\r\n  data = typeof data === 'function' ? data() : data\r\n  vm._ob = data\r\n  observer(data)\r\n}\r\n","import {initState} from './state'\r\n\r\nexport function initMixin(Vue) {\r\n\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this\r\n    vm.$options = options\r\n\r\n    initState(vm)\r\n  }\r\n}\r\n","import {initMixin} from \"./init\";\r\n\r\nfunction Vue(options) {\r\n  // 初始化vue\r\n  this._init(options)\r\n}\r\ninitMixin(Vue)\r\n\r\n\r\nexport default Vue\r\n"],"names":["isObject","data","defineReactive","key","value","observer","Object","defineProperty","configurable","enumerable","get","set","newVal","Observer","Array","isArray","forEach","item","i","walk","k","initState","vm","ops","$options","initData","_ob","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,SAASA,QAAT,CAAkBC,IAAlB,EAAwB;EAC7B,SAAO,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,IAAI,IAA3C;EACD;;ECCD,SAASC,cAAT,CAAwBD,IAAxB,EAA8BE,GAA9B,EAAmCC,KAAnC,EAA0C;EACxCC,EAAAA,QAAQ,CAACD,KAAD,CAAR;EACAE,EAAAA,MAAM,CAACC,cAAP,CAAsBN,IAAtB,EAA4BE,GAA5B,EAAiC;EAC/BK,IAAAA,YAAY,EAAE,IADiB;EAE/BC,IAAAA,UAAU,EAAE,KAFmB;EAG/BC,IAAAA,GAH+B,iBAGzB;EACJ,aAAON,KAAP;EACD,KAL8B;EAM/BO,IAAAA,GAN+B,eAM3BC,MAN2B,EAMnB;EACV,UAAIA,MAAM,KAAKR,KAAf,EAAsB;EAEtBA,MAAAA,KAAK,GAAGQ,MAAR;EACD;EAV8B,GAAjC;EAYD;;MAEKC;EACJ,oBAAYZ,IAAZ,EAAkB;EAAA;;EAChB,QAAIa,KAAK,CAACC,OAAN,CAAcd,IAAd,CAAJ,EAAyB;EACvBA,MAAAA,IAAI,CAACe,OAAL,CAAa,UAACC,IAAD,EAAOC,CAAP,EAAa;EACxBhB,QAAAA,cAAc,CAACD,IAAD,EAAMiB,CAAN,EAAQD,IAAR,CAAd;EACD,OAFD;EAGD,KAJD,MAIO;EACL,WAAKE,IAAL,CAAUlB,IAAV;EACD;EACF;;;;2BAGIA,MAAM;EACT,WAAK,IAAImB,CAAT,IAAcnB,IAAd,EAAoB;EAClBC,QAAAA,cAAc,CAACD,IAAD,EAAOmB,CAAP,EAAUnB,IAAI,CAACmB,CAAD,CAAd,CAAd;EACD;EACF;;;;;;EAGI,SAASf,QAAT,CAAkBJ,IAAlB,EAAwB;EAE7B,MAAI,CAACD,QAAQ,CAACC,IAAD,CAAb,EAAqB;EACrB,SAAO,IAAIY,QAAJ,CAAaZ,IAAb,CAAP;EACD;;ECxCM,SAASoB,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B,MAAMC,GAAG,GAAGD,EAAE,CAACE,QAAf;;EAEA,MAAID,GAAG,CAACtB,IAAR,EAAc;EACZwB,IAAAA,QAAQ,CAACH,EAAD,CAAR;EACD;EACF;;EAED,SAASG,QAAT,CAAkBH,EAAlB,EAAsB;EACpB,MAAIrB,IAAI,GAAGqB,EAAE,CAACE,QAAH,CAAYvB,IAAvB;EACAA,EAAAA,IAAI,GAAG,OAAOA,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,EAAjC,GAAsCA,IAA7C;EACAqB,EAAAA,EAAE,CAACI,GAAH,GAASzB,IAAT;EACAI,EAAAA,QAAQ,CAACJ,IAAD,CAAR;EACD;;ECbM,SAAS0B,SAAT,CAAmBC,GAAnB,EAAwB;EAE7BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACvC,QAAMT,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcO,OAAd;EAEAV,IAAAA,SAAS,CAACC,EAAD,CAAT;EACD,GALD;EAMD;;ECRD,SAASM,GAAT,CAAaG,OAAb,EAAsB;EACpB;EACA,OAAKD,KAAL,CAAWC,OAAX;EACD;;EACDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}